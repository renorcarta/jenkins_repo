pipeline {
    agent any

    environment {
        AuthorizationToken = credentials('LifeTimeServiceAccountToken')
    }

    stages {
        stage('Call OutSystems API') {
            steps {
                sh '''
                    curl -X GET \
                        -H "Authorization: Bearer $AuthorizationToken" \
                        https://cmiti-lt.outsystemsenterprise.com/lifetimeapi/rest/v2/environments/
                '''
            }
        }
    }
}
